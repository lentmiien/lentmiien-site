In my image generating tool, on the page `views/image_gen/index.pug`, I'd like to add the following new functionality:
When rating a completed image, if giving the rating 4 or 5, I want to save a renamed (random uuid type name) copy of the image to the folder `public/img`, and also, I want to save the filename, prompt, model metadata, etc. to a new database collection for good quality images. Furthermore, I want to save the image prompt to my embedding database, with the database details in the metadata, using my embedding service class (services/embeddingApiService.js). Use the normal embedding function `embed` for rating 4 and 5, and for rank 5 do a second embedding with the high quality embedding function `embedHighQuality`.

Also create a small page under image_gen for previewing this new database, with a paginated view of images + metadata, and if the page is opened with a database id in the URL, pin that image at the top.

Use `controllers/ocrcontroller.js` as reference for how to use the embedding tool.

codex resume 019b1be0-cfef-7fe0-85be-41e35fd16545