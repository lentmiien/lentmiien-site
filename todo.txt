I want to add chat messages to my embedding database. In the file `services/messageService.js`, when I create or edit a chat message, also add the message to the embedding database, through the normal `embed` function in `services/embeddingApiService.js`, be sure to include appropriate database metadata in the function call, to persist the entry to the embedding database. (message id, and conversation id as parent)

I create messages in the following functions, in the message service:
- processCompletedResponse
- createMessageNew
- processConvertedOutputs

I edit messages in the following functions, in the message service:
- editTextNew

Note: Ignore all other functions, as those are from older chat systems, that I don't need right now.

I only want to save embeddings for messages with `contentType === "text"`.

Look at `controllers/ocrcontroller.js` for example how to use the embedding class, I won't the high quality embedding for now, but I plan to add a button per message for manually adding selected messages to the high quality embedding database.

codex resume 019b15af-c1c9-7471-89c6-96c4d12f9de3