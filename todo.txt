I'm satisfied with what I see so far, so next, I'd like to add this TTS tool to the `views/chat5_chat.pug` page. I want the tool to work as following:

If the user input some text in the prompt field, and press a new button "Generate TTS", then the text will be sent to the new TTS API, and a new message will be appended to the conversation, with the TTS prompt in `content.transcript`, and the filename in `content.tts`, also note that the file should now be saved in the folder 'public/mp3', to make it permanent, and use mp3 format for all generations. Also, let's make all TTS messages `hideFromBot === true`. Also display a character counter just below the prompt text field, and auto set the TTS max token to 1024 per 500 characters.

Also update the UI rendering to display `contentType === "audio"` on the `views/chat5_chat.pug` page and when messages are added to the UI, with an audio player for `content.audio` or `content.tts`, whichever has a filename saved, and prepend the filename with the path 'mp3/', and display the `content.transcript` if available.

Add some small popup modal in the UI, to show the user the available emotions/tone/effects tags, and a select box to choose `reference_id`, but I did not yet add any reference ids, so leave this empty for now.

Display the loading overlay while waiting for the TTS to complete.

Wrap the TTS API in a service class in the folder `services`, and integrate the service class in the conversation/message services to make this work.

codex resume 019af457-6621-7af1-a7d3-77656aa14239