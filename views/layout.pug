doctype html
html(lang='en')
  head
    if gtag
      script(async src="https://www.googletagmanager.com/gtag/js?id=G-RGSSE514L4")
      script.
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RGSSE514L4', { cookie_domain: 'home.lentmiien.com', cookie_flags: 'SameSite=None;Secure' });
    title Lennart's Website
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    //- Social media meta tags - start
    meta(property='og:title', content=og_title)
    meta(property='og:type', content=og_type)
    meta(property='og:url', content=og_url)
    meta(property='og:image', content=og_image)
    meta(property='og:description', content=og_description)
    meta(property='og:site_name', content=og_site_name)
    meta(property='og:image:width', content=og_image_width)
    meta(property='og:image:height', content=og_image_height)
    meta(name='twitter:card', content=twitter_card)
    meta(name='twitter:creator', content=twitter_creator)
    meta(name='twitter:title', content=twitter_title)
    meta(name='twitter:description', content=twitter_description)
    meta(name='twitter:image', content=twitter_image)
    meta(name='twitter:image:alt', content=twitter_image_alt)
    //- Social media meta tags - end
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
    link(rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css")
    link(rel="stylesheet" href="https://uicdn.toast.com/editor/latest/theme/toastui-editor-dark.min.css")
    link(rel="stylesheet", href="/css/style.css")
    link(rel="stylesheet", href="/css/nav.css")
    link(rel="stylesheet", href="/css/brand.css")
    block styles
  body
    .nav-placeholder
    .navbar-icon(onclick="toggleNavbar()") ☰
    a#goTopPageBtn.nav-action-btn(href=`${loggedIn ? "/mypage" : "/"}`) ⌂
    button#actionBtn.nav-action-btn(disabled) ---
    #navbar.navbar
      .navbar-column
        if loggedIn === true && permissions && permissions.indexOf("quicknote") >= 0
          form#quickNoteForm
            .input-group.mb-1
              input#quickNoteInput.form-control(type='text' placeholder='Quick note...')
              .input-group-append
                button.btn.btn-primary(type='submit') Save
          form#locationForm
            .input-group.mb-1
              input#locationInput.form-control(type='text' placeholder='Location name...')
              .input-group-append
                button.btn.btn-primary(type='submit') Add location
        a.type-1-link(href="/blog", style="width:100%;") Blog
        a.type-2-link(href="/blog/Personal/list", style="width:100%;") Personal
        a.type-2-link(href="/blog/Programming/list", style="width:100%;") Programming
        a.type-2-link(href="/blog/Food/list", style="width:100%;") Food
        a.type-2-link(href="/yaml-viewer", style="width:100%;") YAML viewer
        if loggedIn == true
          a.type-2-link(href="/mypage/blogpost", style="width:100%;") Write blog
        if admin
          a.type-1-link(href="/admin", style="width:100%;") Admin page
          a.type-1-link(href="/admin/html-pages", style="width:100%;") HTML content
          a.type-1-link(href="/admin/app_logs", style="width:100%;") App logs
          a.type-1-link(href="/admin/openai_usage", style="width:100%;") OpenAI Usage
          a.type-1-link(href="/admin/database_usage", style="width:100%;") Database Usage
          a.type-1-link(href="/admin/api-debug-logs", style="width:100%;") API Debug Logs
          a.type-1-link(href="/tmp-files", style="width:100%;") Temp files
        a.type-1-link(href="/cookingp", style="width:100%;") Cooking public page
        a.type-1-link(href="/games", style="width:100%;") Games
      if loggedIn == true
        if chatmode
          .navbar-column
            a.type-1-link(href="/chat3", style="width:100%;") New chat
            li.nav-item.dropdown
              a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false") History
              ul.dropdown-menu
                li#history_list
                  button.dropdown-item(onclick="showHModalPopup()") Show all
                  hr
            li.nav-item.dropdown
              a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false") Select head
              ul.dropdown-menu
                li#head_list
        if permissions && permissions.indexOf("chat5") >= 0
          .navbar-column
            a.type-1-link(href="/chat5/top", style="width:100%;") ChatGPT
            if permissions && permissions.indexOf("chat4") >= 0
              a.type-2-link(href="/chat4/knowledgelist", style="width:100%;") Knowledge
              a.type-2-link(href="/chat4/templates", style="width:100%;") Tempaltes
        if permissions && permissions.indexOf("accounting") >= 0
          .navbar-column
            a.type-1-link(href="/accounting", style="width:100%;") Accounting hub
            a.type-2-link(href="/accounting/legacy", style="width:100%;") Legacy budget view
        if permissions && permissions.indexOf("cooking") >= 0
          .navbar-column
            a.type-1-link(href="/cooking", style="width:100%;") Cooking calendar
            a.type-2-link(href="/cookingp?uid=nzz8gXilQBZ8nxS78b0UjhpPtnXqUMFW", style="width:100%;") [TEST] Maiko cooking request page
            a.type-2-link(href="/cookingp?uid=JSqngWDQyGoIVohdrG96dxU6XYSDv98G", style="width:100%;") [TEST] Mizuki cooking request page
          if permissions && permissions.indexOf("test") >= 0
            .navbar-column
              h2 Test stuff
              if permissions && permissions.indexOf("box") >= 0
                a.type-1-link(href="/box", style="width:100%;") Box packer
              if permissions && permissions.indexOf("binpacking") >= 0
                a.type-1-link(href="/binpacking", style="width:100%;") 3D Bin Packing
              a.type-1-link(href="/mypage/pdf_to_jpg", style="width:100%;") PDF to JPG
              if permissions && permissions.indexOf("quicknote") >= 0
                a.type-1-link(href="/quicknote", style="width:100%;") Quick note
              a.type-1-link(href="/electricity_usage", style="width:100%;") EL
              a.type-1-link(href="/mpu6050", style="width:100%;") MPU6050
              a.type-1-link(href="/dht22", style="width:100%;") DHT22
              a.type-1-link(href="/mypage/github", style="width:100%;") GitHub (lentmiien)
              a.type-1-link(href="/es/es_dashboard", style="width:100%;") Emergency Stock
              a.type-1-link(href="/receipt", style="width:100%;") Upload receipt
              a.type-1-link(href="/product", style="width:100%;") Product details
              a.type-1-link(href="/chat5", style="width:100%;") Chat5
              a.type-1-link(href="/chat5/top", style="width:100%;") Chat5 (new)
              a.type-1-link(href="/chat5/ai_model_cards", style="width:100%;") Manage AI Models
              a.type-1-link(href="/budget", style="width:100%;") Accounting (new)
              a.type-1-link(href="/budget/review", style="width:100%;") Budget review
              a.type-1-link(href="/budget/cards", style="width:100%;") Credit cards
              a.type-1-link(href="/gallery", style="width:100%;") Gallery
              a.type-1-link(href="/payroll", style="width:100%;") Payroll
              a.type-1-link(href="/scheduleTask/calendar", style="width:100%;") Schedule
              a.type-1-link(href="/image_gen", style="width:100%;") ComfyIU
              a.type-1-link(href="/image_gen/bulk", style="width:100%;") ComfyIU bulk
              a.type-1-link(href="/sora", style="width:100%;") Sora
              a.type-1-link(href="/diff", style="width:100%;") JSON diff
        if permissions && permissions.indexOf("archive") >= 0
          .navbar-column
            h2 Archive
            a.type-2-link(href="/chat", style="width:100%;") [OLD] ChatGPT v1
            a.type-2-link(href="/chat2", style="width:100%;") [OLD] ChatGPT v2
            a.type-2-link(href="/chat3", style="width:100%;") [OLD] ChatGPT v3
            a.type-2-link(href="/chat4", style="width:100%;") [OLD] ChatGPT v4
            a.type-2-link(href="/chat3/manage_knowledge", style="width:100%;") [OLD] ChatGPT knowledge
            a.type-2-link(href="/gptdocument", style="width:100%;") [OLD] GPT document
            a.type-2-link(href="/mypage/speektome", style="width:100%;") [TEST] Speek to me
            a.type-2-link(href="/mypage/showtome", style="width:100%;") [TEST] Show to me
            a.type-1-link(href="/chat3/browse_knowledge?id=6562e7bb5d76250d064fe480", style="width:100%;") Cookbook
            a.type-1-link(href="/chat3/browse_knowledge?id=656304600cbce400a732cc81", style="width:100%;") Knowledge
            a.type-2-link(href="/openai", style="width:100%;") OpenAI database
            a.type-2-link(href="/openai/manage", style="width:100%;") Manage Open AI API models
            a.type-2-link(href="/openai/history", style="width:100%;") Open AI API usage history
            a.type-2-link(href="/embedding", style="width:100%;") Embeddings
            a.type-2-link(href="/health", style="width:100%;") Health tracker
      else
        .navbar-column
          a.type-1-link(href="/login", style="width:100%;") Log in
      .navbar-column
        h2 Sample/Demos
        if htmlPaths && htmlPaths.length
          each l in htmlPaths
            .navbar-html-entry
              a.type-2-link(href=l.path, style="width:100%;", target="_blank")= l.name
              - const avgDisplay = typeof l.averageRating === 'number' ? l.averageRating.toFixed(2) : null;
              - const ratingParts = Array.isArray(l.ratings) ? l.ratings.filter(r => Number.isFinite(r.score)).map(r => `${r.label}: ${r.score}`) : [];
              if avgDisplay || ratingParts.length
                small.navbar-html-rating
                  if avgDisplay
                    span.navbar-html-rating-avg Avg #{avgDisplay}
                    if l.version
                      span.navbar-html-rating-version  | v#{l.version}
                  if ratingParts.length
                    if avgDisplay
                      span.navbar-html-rating-sep  |
                    span.navbar-html-rating-breakdown= ratingParts.join(' | ')
        else
          small.navbar-html-empty No public demos yet.
    .container-fluid
      block content
    div(style="height:50px;")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous")
    script(src="/js/nav.js", defer) 
    script(src="/js/layout.js", defer) 
    script(src="https://cdn.socket.io/4.0.0/socket.io.min.js", defer)
    script(src="/js/notifications.js", defer) 
    block script
