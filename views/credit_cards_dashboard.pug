extends layout

block styles
  link(rel="stylesheet", href="/css/credit_cards.css")

block content
  if cards && cards.length
    include credit_cards_dashboard_inner
  else
    .credit-dashboard
      h2.credit-dashboard__title Set up your first credit card
      p.inline-feedback You do not have any credit cards configured yet. Add one below to start tracking your usage.
      form#newCardForm(class="credit-actions")
        input.form-control(type="text", name="name", placeholder="Card name", required, aria-label="Card name")
        input.form-control(type="date", name="issuedDate", aria-label="Issued date")
        input.form-control(type="number", name="creditLimit", step="1000", min="0", placeholder="Limit (optional)", aria-label="Credit limit")
        button.btn.btn-primary(type="submit") Add card
      p#cardFeedback.inline-feedback

block script
  script(src="https://d3js.org/d3.v7.min.js")
  script.
    window.creditCardPage = {
      cards: !{JSON.stringify(cards || [])},
      activeCardId: !{JSON.stringify(activeCardId || null)},
      routes: {
        overview: '/budget/cards/api/overview',
        month: '/budget/cards/api/month',
        transaction: '/budget/cards/api/transaction',
        deleteTransaction: '/budget/cards/api/transaction',
        confirm: '/budget/cards/api/month',
        importCsv: '/budget/cards/api/import',
        monthViewBase: '/budget/cards/month',
        cards: '/budget/cards/api/cards',
        createCard: '/budget/cards/api/card',
        updateCard: '/budget/cards/api/card',
      },
    };
  script(src="/js/credit_cards_dashboard.js", defer)
